---
wave: 1
depends_on: 05-Universal-Task-Visibility
files_modified:
  - frontend/src/views/workorder/WorkOrderForm.vue
  - frontend/src/views/workorder/components/TaskSection.vue (new)
autonomous: true
---

# Plan 06-01: Task Display Section Integration

## Overview
在 WorkOrderForm.vue 中添加任务显示区域，复用现有 TaskManagement/DraftTaskManagement 组件的逻辑，显示施工单关联的所有任务。

## Tasks

### Task 1: Create TaskSection.vue component
- **Action**: Create new component `frontend/src/views/workorder/components/TaskSection.vue`
- **Files**: TaskSection.vue
- **Verify**: Component renders without errors when imported
- **Done**: Component file created with:
  - Props: `workOrderId`, `tasks`, `editable`
  - Statistics header (total, draft, pending, completed counts)
  - Task list table with basic columns
  - Loading state handling
  - Empty state handling

### Task 2: Integrate TaskSection into WorkOrderForm.vue
- **Action**: Import and use TaskSection component in WorkOrderForm.vue
- **Files**: frontend/src/views/workorder/WorkOrderForm.vue
- **Verify**: Task section displays below "工序选择" divider, shows tasks after form load
- **Done**: 
  - Import TaskSection component
  - Add to template after materials section
  - Pass `workOrderId` and `editable` props
  - Fetch tasks when in edit mode

### Task 3: Add task fetching logic
- **Action**: Add methods to fetch tasks for current work order
- **Files**: frontend/src/views/workorder/WorkOrderForm.vue, frontend/src/api/modules/workorder-task.js
- **Verify**: Tasks load and display correctly in edit mode
- **Done**:
  - Import workOrderTaskAPI
  - Add `loadTasks()` method in WorkOrderForm.vue
  - Call loadTasks() in mounted() when isEdit is true
  - Store tasks in component data

## Verification Criteria
- [ ] TaskSection component created with proper structure
- [ ] Task section appears in WorkOrderForm.vue after materials section
- [ ] Tasks display correctly in edit mode
- [ ] Shows empty state when no tasks exist
- [ ] Shows loading spinner while fetching tasks

## Must Haves
1. TaskSection.vue component file
2. TaskSection imported and used in WorkOrderForm.vue
3. Tasks displayed when editing existing work order
