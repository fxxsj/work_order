---
wave: 2
depends_on: 06-01
files_modified:
  - frontend/src/views/workorder/components/TaskSection.vue
  - frontend/src/api/modules/workorder-task.js
autonomous: true
---

# Plan 06-03: Task Statistics and Manual Addition

## Overview
添加任务统计信息（总数、完成数、分派数）和手动添加任务功能，显示任务分派状态。

## Tasks

### Task 1: Add task statistics display
- **Action**: Display task count statistics in TaskSection header
- **Files**: frontend/src/views/workorder/components/TaskSection.vue
- **Verify**: Statistics bar shows total, draft, pending, in_progress, completed counts
- **Done**:
  - Add computed properties for statistics
  - Display statistics in header (tags or badges)
  - Add progress percentage display
  - Style statistics for visual clarity

### Task 2: Add task assignment status display
- **Action**: Show assignment status for each task
- **Files**: frontend/src/views/workorder/components/TaskSection.vue
- **Verify**: Each task shows assigned department/operator or "未分派" status
- **Done**:
  - Add assignment status column to task table
  - Show department name if assigned
  - Show operator name if assigned
  - Display "未分派" for unassigned tasks
  - Use color coding for assigned vs unassigned

### Task 3: Add manual task creation
- **Action**: Implement "Add Task" button for manual task addition
- **Files**: frontend/src/views/workorder/components/TaskSection.vue, frontend/src/api/modules/workorder-task.js
- **Verify**: Can manually create new tasks beyond auto-generated ones
- **Done**:
  - Add "添加任务" button in TaskSection header
  - Create add task dialog with fields:
    - Process selection (required)
    - Task type selection
    - Quantity
    - Priority
    - Notes/requirements
  - Connect to workOrderTaskAPI.create() method
  - Show success message and refresh task list

## Verification Criteria
- [ ] Statistics header shows correct counts (total, draft, pending, completed)
- [ ] Progress bar shows overall completion percentage
- [ ] Each task shows assignment status (department/operator)
- [ ] "未分派" displayed for unassigned tasks
- [ ] "添加任务" button is visible and functional
- [ ] Manual task creation works and appears in list
- [ ] New tasks are created with draft status

## Must Haves
1. Task statistics bar in TaskSection header
2. Assignment status column in task table
3. "添加任务" button with dialog
4. Manual task creation via API
